// Bonus Feature - Show favourite orders per customer

void ShowFavoriteOrders(Customer customer)
{
    if (customer.orderList.Count == 0)
    {
        Console.WriteLine("No previous orders found for this customer.");
        return;
    }

    // Use the last order
    Order lastOrder = customer.orderList.Last();

    Console.WriteLine("\nFavorite Orders (Last Order):");
    int index = 1;
    foreach (OrderedFoodItem item in lastOrder.orderfooditemList)
    {
        Console.WriteLine($"{index}. {item.ItemName} - Ordered {item.QtyOrdered} times");
        index++;
    }
}
void mainprogram()
{
    //Start of Program
    Console.WriteLine();
    Console.WriteLine("Welcome to the Gruberoo Food Delivery System \r\n");
    Console.WriteLine("{0} restuarants loaded!", restaurantList.Count);
    Console.WriteLine("{0} food items loaded!", foodItemList.Count);
    Console.WriteLine("{0} customers loaded!", customerList.Count);
    Console.WriteLine("{0} orders loaded!", orderList.Count);
    Console.WriteLine("\n");
    //Main Program
    while (true)
    {
        Console.WriteLine("===== Gruberoo Food Delivery System ===== ");
        Console.WriteLine("1. List all restaurants and menu items");
        Console.WriteLine("2. List all orders ");
        Console.WriteLine("3. Create a new order ");
        Console.WriteLine("4. Process an order ");
        Console.WriteLine("5. Modify an existing order");
        Console.WriteLine("6. Delete an existing order");
        Console.WriteLine("7. Bulk Processing of Unprocessed Orders");
        Console.WriteLine("8. Display Total Order Amount Per Restaurant");
        Console.WriteLine("9. Show Customer Favorite Orders");
        Console.WriteLine("0. Exit");
        Console.Write("Enter your choice: ");
        int userAnswer = Convert.ToInt32(Console.ReadLine());

        if (userAnswer == 0)
        {
            //When exit is chosen, the information in the queue and stack are saved to new files queue.csv and stack.csv respectively. 
            // Save data to files before exiting
            Console.WriteLine("\nSaving data...");
            SaveQueueToFile(restaurantOrderQueue);
            SaveStackToFile(refundStack);
            Console.WriteLine("Thank you for using Gruberoo Food Delivery System!");
            break;
        }
        else if (userAnswer == 1)
        {
            ListAllRestaurantsAndMenuItems(restaurantList);
        }
        else if (userAnswer == 2)
        {
            DisplayallOrders(orderList);
        }
        else if (userAnswer == 3)
        {
            CreateNewOrder();
        }
        else if (userAnswer == 4)
        {
            ProcessOrder(restaurantOrderQueue, orderList, refundStack, orderfooditemList);
        }
        else if (userAnswer == 5)
        {
            ModifyOrder(customerList, restaurantAssignDict);
        }
        else if (userAnswer == 6)
        {
            DeleteExistingOrder(orderList, orderfooditemList);
        }
        else if (userAnswer == 7)
        {
            BulkProcessing(orderList);
        }
        else if (userAnswer == 8)
        {
            DisplayTotalOrderAmount(restaurantList, orderList);
        }
        else if (userAnswer == 9)
        {
            Console.Write("Enter Customer Email: ");
            string email = Console.ReadLine().Trim().ToLower();
            Customer cust = customerList.FirstOrDefault(c => c.EmailAddress.ToLower() == email);

            if (cust != null)
                ShowFavoriteOrders(cust);
            else
                Console.WriteLine("Customer not found.");
        }
    }
}
mainprogram();
